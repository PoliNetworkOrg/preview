"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["9868"],{8100:function(e,n,a){a.r(n),a.d(n,{default:()=>p,frontMatter:()=>o,metadata:()=>i,assets:()=>s,toc:()=>c,contentTitle:()=>d});var i=JSON.parse('{"id":"archive/app/developer/backend/DBPolifemo/old/inserisci.py","title":"inserisci.py","description":"","source":"@site/docs/archive/app/developer/backend/DBPolifemo/old/inserisci.py.md","sourceDirName":"archive/app/developer/backend/DBPolifemo/old","slug":"/archive/app/developer/backend/DBPolifemo/old/inserisci.py","permalink":"/preview/PoliNetworkOrg/docs/pr/35/docs/archive/app/developer/backend/DBPolifemo/old/inserisci.py","draft":false,"unlisted":false,"editUrl":"https://github.com/polinetworkorg/docs/tree/main/docs/archive/app/developer/backend/DBPolifemo/old/inserisci.py.md","tags":[],"version":"current","frontMatter":{},"sidebar":"archive","previous":{"title":"TabelleCalendar","permalink":"/preview/PoliNetworkOrg/docs/pr/35/docs/archive/app/developer/backend/DBPolifemo/TabelleCalendar"},"next":{"title":"Prima installazione su server","permalink":"/preview/PoliNetworkOrg/docs/pr/35/docs/archive/app/developer/backend/runOnServer"}}'),t=a("6773"),r=a("6070");let o={},d="inserisci.py",s={},c=[];function l(e){let n={code:"code",h1:"h1",header:"header",pre:"pre",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"inseriscipy",children:"inserisci.py"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'\nimport os\nimport mysql.connector as database\nimport json\n\nconnection = database.connect(\n    user=\'root\',\n    password=\'\',\n    host="localhost",\n    database="DBPolifemo"\n)\n\ncursor = connection.cursor()\n\nwith open("groups.json", \'r\', encoding=\'cp850\') as f:\n    text = f.read()\n    groups = json.loads(text)\n    data = groups["index_data"]\n    for i in range(len(data)):        \n        try:\n            if data[i]["degree"] == None:\n                 data[i]["degree"]=""\n                 \n            if data[i]["school"] == None:\n                 data[i]["school"]=""\n            \n            if data[i]["year"] == None:\n                 data[i]["year"]=""\n            \n            if data[i]["permanentId"] == None:\n                 data[i]["permanentId"]=\'\'\n            \n            if data[i]["linkfunzionante"] == None:\n                 data[i]["linkfunzionante"]=""\n\n            if data[i]["language"] == \'EN\' : \n                 data[i]["language"]=\'ENG\'\n                 \n            if data[i]["language"] == \'IT\' : \n                 data[i]["language"]=\'ITA\'\n\n            data[i]["class"] = json.dumps(data[i]["class"])\n            data[i]["id"] = json.dumps(data[i]["id"])\n            data[i]["id_link"] = json.dumps(data[i]["id_link"])\n                 \n            string = "INSERT IGNORE INTO Groups VALUES ("+ data[i]["class"]  + ", \'"+ data[i]["office"]  + "\', "+ data[i]["id"]  + ", \'"+ data[i]["degree"]  + "\',\'"+ data[i]["school"]  + "\',"+ data[i]["id_link"]  + ",\'"+ data[i]["language"]  + "\',\'"+ data[i]["type"]  + "\', \'"+ data[i]["year"]  + "\', \'"+ data[i]["platform"]  + "\', \'"+ data[i]["permanentId"]  + "\', \'"+ data[i]["LastUpdateInviteLinkTime"]  + "\', \'"+ data[i]["linkfunzionante"]  + "\');";\n            replace = string.replace("\'\'", "NULL")\n            cursor.execute(replace)\n            connection.commit()\n        except database.Error as e:\n           print(f"Error retrieving entry from database: {e}")\n           print(replace)\n        except Exception as e:\n            print(f"string error: {e}")\n            print(data[i]["class"])\n        \n'})})]})}function p(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},6070:function(e,n,a){a.d(n,{Z:function(){return d},a:function(){return o}});var i=a(1699);let t={},r=i.createContext(t);function o(e){let n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);